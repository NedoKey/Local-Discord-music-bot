# Инструкция по сборке MusicBot ULTRA в .exe

## Требования

- Python 3.11
- Все зависимости из `requirements.txt`

## Шаг 1: Установка зависимостей

```powershell
py -3.11 -m pip install -r requirements.txt
```

## Шаг 2: Сборка исполняемого файла

### Вариант 1: Использование скрипта сборки (рекомендуется)

```powershell
py -3.11 build_exe.py
```

### Вариант 2: Прямой вызов PyInstaller

```powershell
py -3.11 -m PyInstaller musicbot_ultra.spec --clean
```

## Шаг 3: Результат сборки

После успешной сборки:

1. **Исполняемый файл** будет находиться в папке `dist/MusicBot_ULTRA.exe`
2. **FFmpeg** уже включен в exe-файл
3. **config.json** включен в exe-файл

## Шаг 4: Подготовка к запуску на другом компьютере

### Что нужно скопировать:

1. **MusicBot_ULTRA.exe** из папки `dist/`
2. **token.txt** - создайте файл с токеном бота Discord (обязательно!)

### Что создастся автоматически:

- Папка `tracks/` - для музыкальных файлов (создастся при первом запуске)
- Файл `config.json` - если его нет, создастся с настройками по умолчанию

## Шаг 5: Первый запуск на новом компьютере

1. Скопируйте `MusicBot_ULTRA.exe` и `token.txt` в одну папку
2. Запустите `MusicBot_ULTRA.exe`
3. При первом запуске может появиться предупреждение Windows Defender - это нормально, нажмите "Подробнее" → "Выполнить в любом случае"
4. Добавьте музыкальные файлы через кнопку "ADD" в интерфейсе

## Важные замечания

- **Токен бота**: Обязательно создайте файл `token.txt` в той же папке, что и exe-файл
- **Антивирус**: Может блокировать exe-файл при первом запуске (ложное срабатывание)
- **Размер файла**: Exe-файл будет довольно большим (~100-200 МБ) из-за включенных библиотек
- **FFmpeg**: Уже включен в exe, дополнительная установка не требуется

## Решение проблем

### Ошибка "FFmpeg not found"
- Убедитесь, что используете собранный exe из папки `dist/`
- FFmpeg должен быть включен автоматически

### Ошибка "Token not found"
- Создайте файл `token.txt` в той же папке, что и exe
- Вставьте токен бота в файл (без кавычек)

### Ошибка при запуске exe
- Убедитесь, что собирали на той же версии Windows (или используйте виртуальную машину)
- Попробуйте собрать с флагом `--onedir` вместо `--onefile` (создаст папку с файлами)

## Альтернативный вариант сборки (папка вместо одного файла)

Если один exe-файл работает плохо, можно собрать в папку:

```powershell
py -3.11 -m PyInstaller musicbot_ultra.spec --onedir --clean
```

Это создаст папку `dist/MusicBot_ULTRA/` с exe-файлом и зависимостями. Запуск будет быстрее, но нужно копировать всю папку.
